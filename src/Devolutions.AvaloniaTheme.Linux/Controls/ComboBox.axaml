<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:design="clr-namespace:Devolutions.AvaloniaTheme.Linux.Design">

  <!-- 
    Un-comment to allow auto-completion;
    DO NOT INCLUDE WHEN PUBLISHING!
  -->
  <!-- <ResourceDictionary.MergedDictionaries> -->
  <!--   <ResourceInclude Source="/Accents/ThemeResources.axaml" /> -->
  <!-- </ResourceDictionary.MergedDictionaries> -->

  <Design.PreviewWith>
    <design:ThemePreviewer>
      <StackPanel>
        <StackPanel Margin="20" Height="200" Spacing="5">
          <ComboBox SelectedIndex="2" MaxDropDownHeight="100" HorizontalAlignment="Left">
            <ComboBoxItem>Option 1</ComboBoxItem>
            <ComboBoxItem>Option</ComboBoxItem>
            <ComboBoxItem>Confluence plus</ComboBoxItem>
          </ComboBox>
          <ComboBox SelectedIndex="0" MaxDropDownHeight="100" HorizontalAlignment="Left">
            <ComboBoxItem>Option 1</ComboBoxItem>
            <ComboBoxItem>Option</ComboBoxItem>
            <ComboBoxItem>Confluence plus</ComboBoxItem>
          </ComboBox>
          <ComboBox SelectedIndex="2" MaxDropDownHeight="100" IsEnabled="False">
            <ComboBoxItem>Option 1</ComboBoxItem>
            <ComboBoxItem>Option 2</ComboBoxItem>
            <ComboBoxItem>Option 3</ComboBoxItem>
          </ComboBox>
          <ComboBox MaxDropDownHeight="100" PlaceholderText="Choose one">
            <ComboBoxItem>Option 1</ComboBoxItem>
            <ComboBoxItem>Option 2</ComboBoxItem>
            <ComboBoxItem>Option 3</ComboBoxItem>
            <ComboBoxItem>Option 4</ComboBoxItem>
            <ComboBoxItem>Option 5</ComboBoxItem>
            <ComboBoxItem>Option 6</ComboBoxItem>
            <ComboBoxItem>Option 7</ComboBoxItem>
            <ComboBoxItem>Option 8</ComboBoxItem>
            <ComboBoxItem>Option 9</ComboBoxItem>
          </ComboBox>
        </StackPanel>

        <Border Background="{DynamicResource LayoutBackgroundLowBrush}">
          <StackPanel Margin="20" Height="200" Width="180" Spacing="5">
            <ComboBox SelectedIndex="2" MaxDropDownHeight="100">
              <ComboBoxItem>Option 1</ComboBoxItem>
              <ComboBoxItem>Option 2</ComboBoxItem>
              <ComboBoxItem>Option 3</ComboBoxItem>
            </ComboBox>
            <ComboBox SelectedIndex="2" MaxDropDownHeight="100" IsEnabled="False">
              <ComboBoxItem>Option 1</ComboBoxItem>
              <ComboBoxItem>Option 2</ComboBoxItem>
              <ComboBoxItem>Option 3</ComboBoxItem>
            </ComboBox>
            <ComboBox MaxDropDownHeight="100" PlaceholderText="Choose one">
              <ComboBoxItem>Option 1</ComboBoxItem>
              <ComboBoxItem>Option 2</ComboBoxItem>
              <ComboBoxItem>Option 3</ComboBoxItem>
              <ComboBoxItem>Option 4</ComboBoxItem>
              <ComboBoxItem>Option 5</ComboBoxItem>
              <ComboBoxItem>Option 6</ComboBoxItem>
              <ComboBoxItem>Option 7</ComboBoxItem>
              <ComboBoxItem>Option 8</ComboBoxItem>
              <ComboBoxItem>Option 9</ComboBoxItem>
            </ComboBox>
          </StackPanel>
        </Border>
      </StackPanel>
    </design:ThemePreviewer>
  </Design.PreviewWith>


  <ControlTheme x:Key="PopUpToggleButton" TargetType="ToggleButton">
    <Setter Property="Template">
      <ControlTemplate>
        <Border
          Name="PART_Border"
          BorderBrush="Transparent">
          <Path Height="6"
                Stretch="Uniform"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Data="{DynamicResource ChevronPathThin}"
                Fill="{DynamicResource ForegroundHighBrush}" />
        </Border>
      </ControlTemplate>
    </Setter>

    <Style Selector="^:disabled">
      <Style Selector="^ /template/ Path">
        <Setter Property="Fill" Value="{DynamicResource ButtonForegroundDisabled}" />
      </Style>
    </Style>
  </ControlTheme>

  <ControlTheme x:Key="{x:Type ComboBox}" TargetType="ComboBox">
    <Setter Property="Background" Value="{DynamicResource ButtonBackground}" />
    <Setter Property="Foreground" Value="{WindowActiveResourceToggler ForegroundHighBrush, ForegroundInactiveBrush}" />
    <Setter Property="CornerRadius" Value="{DynamicResource ControlCornerRadius}" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="Padding" Value="10 0 0 0" />
    <Setter Property="MinHeight" Value="{DynamicResource InputDefaultHeight}" />
    <Setter Property="PlaceholderForeground" Value="{DynamicResource ForegroundLowBrush}" />
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
    <Setter Property="FocusAdorner" Value="{x:Null}" />
    <Setter Property="ClipToBounds" Value="False" />
    <Setter Property="Template">
      <ControlTemplate>
        <Panel Name="ReservedSpaceForFocus"
               ClipToBounds="False"
               Margin="{DynamicResource FocusBorderThickness}">
          <Border
            Name="BorderElement"
            Background="{TemplateBinding Background}"
            BorderThickness="{DynamicResource ButtonBorderThickness}"
            BorderBrush="{DynamicResource InputBorder}"
            CornerRadius="{TemplateBinding CornerRadius}">
            <Grid ColumnDefinitions="*,Auto">
              <TextBlock
                Name="PlaceholderTextBlock"
                Grid.Column="0"
                Margin="{TemplateBinding Padding}"
                Foreground="{TemplateBinding PlaceholderForeground}"
                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                IsVisible="{TemplateBinding SelectionBoxItem, Converter={x:Static ObjectConverters.IsNull}}"
                Text="{TemplateBinding PlaceholderText}" />
              <ContentControl
                Grid.Column="0"
                Margin="{TemplateBinding Padding}"
                Foreground="{TemplateBinding Foreground}"
                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                Content="{TemplateBinding SelectionBoxItem}"
                ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" />
              <ToggleButton
                Name="Toggle"
                Grid.Column="1"
                Theme="{StaticResource PopUpToggleButton}"
                Width="16"
                Height="16"
                Margin=" 10 0"
                ClickMode="Press"
                Focusable="False"
                IsChecked="{TemplateBinding IsDropDownOpen, Mode=TwoWay}" />
            </Grid>
          </Border>
          <Border Name="FocusBorderElement"
                  IsVisible="False"
                  BorderThickness="{StaticResource FocusBorderThickness}"
                  BorderBrush="{WindowActiveResourceToggler InputFocusedBorder, InputFocusedInactiveBorder}"
                  CornerRadius="{TemplateBinding CornerRadius}" />
          <Popup
            Name="PART_Popup"
            MaxHeight="{TemplateBinding MaxDropDownHeight}"
            IsLightDismissEnabled="True"
            IsOpen="{TemplateBinding IsDropDownOpen, Mode=TwoWay}"
            InheritsTransform="True"
            Placement="AnchorAndGravity"
            PlacementAnchor="BottomLeft"
            PlacementGravity="BottomRight"
            HorizontalOffset="-1">
            <Popup.MinWidth>
              <MultiBinding Converter="{x:Static DevoMultiConverters.TotalWidthConverter}">
                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Bounds.Width" />
                <Binding Source="{StaticResource PopupSideMarginWidth}" />
              </MultiBinding>
            </Popup.MinWidth>
            <Popup.VerticalOffset>
              <MultiBinding Converter="{x:Static DevoMultiConverters.SelectedIndexToPopupOffsetConverter}">
                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="SelectedIndex" />
                <Binding Source="{StaticResource ComboBoxItemHeight}" />
                <Binding Source="{StaticResource InitialFirstItemDistance}" />
                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="MaxDropDownHeight" />
                <Binding Source="{StaticResource PopupTrimHeight}" />
              </MultiBinding>
            </Popup.VerticalOffset>
            <Border Background="{DynamicResource PopupBackgroundBrush}"
                    BorderBrush="{DynamicResource PopupBorderBrush}"
                    BorderThickness="1"
                    CornerRadius="{DynamicResource ControlCornerRadius}"
                    Margin="{DynamicResource PopupMargin}"
                    BoxShadow="{DynamicResource PopupShadow}">
              <ScrollViewer
                HorizontalScrollBarVisibility="{TemplateBinding (ScrollViewer.HorizontalScrollBarVisibility)}"
                VerticalScrollBarVisibility="{TemplateBinding (ScrollViewer.VerticalScrollBarVisibility)}"
                IsDeferredScrollingEnabled="{TemplateBinding (ScrollViewer.IsDeferredScrollingEnabled)}">
                <ItemsPresenter Name="PART_ItemsPresenter" ItemsPanel="{TemplateBinding ItemsPanel}" />
              </ScrollViewer>
            </Border>
          </Popup>
        </Panel>
      </ControlTemplate>
    </Setter>

    <!-- Tabbing focus -->
    <Style Selector="^:focus-visible">
      <Style Selector="^ /template/ Border#FocusBorderElement">
        <Setter Property="IsVisible" Value="True" />
      </Style>
    </Style>

    <Style Selector="^:disabled">
      <Setter Property="Foreground" Value="{DynamicResource ButtonForegroundDisabled}" />
    </Style>

    <Style Selector="^:pointerover">
      <Setter Property="Background" Value="{DynamicResource ComboBoxBackgroundPointerOver}" />
    </Style>
  </ControlTheme>
</ResourceDictionary>